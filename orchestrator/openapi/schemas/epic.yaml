Epic:
  type: object
  properties:
    id:
      type: integer
    project_id:
      type: integer
    release_id:
      type: integer
      nullable: true
      description: ID of the release this epic belongs to
    title:
      type: string
    description:
      type: string
      nullable: true
    prd_file_path:
      type: string
      nullable: true
    epic_file_path:
      type: string
      nullable: true
    status:
      type: string
      enum: [planning, active, completed]
    depends_on:
      type: array
      items:
        type: integer
      description: IDs of epics this epic depends on
    target_date:
      type: string
      format: date
      nullable: true
      description: Target completion date for this epic
    phase:
      type: integer
      minimum: 1
      description: Computed phase number based on dependencies (1 = no deps)
    created_by_user_id:
      type: integer
    task_stats:
      type: object
      properties:
        total:
          type: integer
        done:
          type: integer
        in_progress:
          type: integer
    progress_percentage:
      type: integer
      minimum: 0
      maximum: 100
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time
  required:
    - id
    - project_id
    - title
    - status
    - created_by_user_id
    - created_at
    - updated_at

CreateEpicRequest:
  type: object
  properties:
    title:
      type: string
      minLength: 1
      maxLength: 200
    description:
      type: string
      nullable: true
    prd_file_path:
      type: string
      nullable: true
    release_id:
      type: integer
      nullable: true
      description: ID of the release to assign this epic to
    depends_on:
      type: array
      items:
        type: integer
      description: IDs of epics this epic depends on
    target_date:
      type: string
      format: date
      nullable: true
    acceptance_criteria:
      type: array
      items:
        type: string
        minLength: 1
      minItems: 1
      description: List of acceptance criteria - at least one required
  required:
    - title
    - acceptance_criteria

UpdateEpicRequest:
  type: object
  properties:
    title:
      type: string
      minLength: 1
      maxLength: 200
    description:
      type: string
      nullable: true
    prd_file_path:
      type: string
      nullable: true
    status:
      type: string
      enum: [planning, active, completed]
    release_id:
      type: integer
      nullable: true
      description: ID of the release to assign this epic to
    depends_on:
      type: array
      items:
        type: integer
      description: IDs of epics this epic depends on
    target_date:
      type: string
      format: date
      nullable: true

EpicProgress:
  type: object
  properties:
    epic_id:
      type: integer
    total_tasks:
      type: integer
    completed_tasks:
      type: integer
    in_progress_tasks:
      type: integer
    pending_review_tasks:
      type: integer
    blocked_tasks:
      type: integer
    progress_percentage:
      type: integer
      minimum: 0
      maximum: 100
  required:
    - epic_id
    - total_tasks
    - completed_tasks
    - in_progress_tasks
    - pending_review_tasks
    - blocked_tasks
    - progress_percentage
